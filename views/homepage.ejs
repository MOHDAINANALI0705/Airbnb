<%- include('./partials/head')%>
<%- include('./partials/nav')%>
<div style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center; margin-top: 40px; background: #f7f7f7; padding: 40px 0;"></div>
<h1 style="width: 100%; text-align: center; font-size: 2em; font-weight: 700; color: #22223b; margin-bottom: 36px; letter-spacing: 1px;">Welcome to Airbnb</h1>
<%console.log(details)%>
  <% details.forEach(detail => { %>
      <input type="hidden" name="id" value="<%= detail._id %>"/>
      <div style="width: 100%; height: 190px; background: #e6eaf3; border-radius: 10px; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 18px;">
        <% if (detail.photoURL) { %>
          <img src="<%= detail.photoURL %>" alt="<%= detail.name %>" style="width: 100%; height: 100%; object-fit: cover;">
        <% } else { %>
          <span style="color: #b0b6c1; font-size: 1.1em;">No Image</span>
        <% } %>
      </div>
      <div style="font-weight: 700; color: #1a2233; font-size: 1.25em; margin-bottom: 10px; text-align: center; letter-spacing: 0.5px;"><%= detail.detailname %></div>
      <div style="color: #3a4668; font-size: 1.05em; margin-bottom: 8px;">Price: <span style="font-weight: 600; color: #2d7efb;"><%= detail.price %></span></div>
      <div style="display: flex; align-items: center; margin-bottom: 8px;">
        <span style="color: #ffb400; font-size: 1.1em; margin-right: 6px;">
          <% 
            const fullStars = Math.floor(detail.ratings);
            const halfStar = (detail.ratings % 1) >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            for(let i=0; i<fullStars; i++) { %>
              &#9733;
          <% } %>
          <% if(halfStar) { %>
              <span style="position: relative; display: inline-block; width: 1em;">
                <span style="position: absolute; width: 50%; overflow: hidden; color: #ffb400;">&#9733;</span>
                <span style="color: #e0e0e0;">&#9733;</span>
              </span>
          <% } %>
          <% for(let i=0; i<emptyStars; i++) { %>
              <span style="color: #e0e0e0;">&#9733;</span>
          <% } %>
        </span>
        <span style="color: #6b7280; font-size: 1em; font-weight: 500;">(<%= detail.ratings %>)</span>
      </div>
      <div style="display: flex; gap: 12px; margin-top: 12px; width: 100%; justify-content: center;">
        <a href="/home/<%= detail._id %>" style="text-decoration: none; color: #2d7efb; font-weight: 600; font-size: 1.1em; margin-right: 10px;">
          View Details
          </a>
        <%- include('./partials/addwishlist',{home:detail})%>
        <button type="submit" style="background: #2d7efb; color: #fff; border: none; border-radius: 6px; padding: 8px 18px; font-weight: 600; cursor: pointer; transition: background 0.2s;">
          Book
        </button>
      </div>
       <% })%>
</div>
